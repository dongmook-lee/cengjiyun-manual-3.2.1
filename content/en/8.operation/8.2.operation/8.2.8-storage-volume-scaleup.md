---
title: "8.2.8 칵테일 클라우드에서 스토리지 볼륨 스케일업 방법"
weight: 8
---

---
워크로드가 스토리지 볼륨(Persistent Volume)을 사용 중, 용량이 부족 할 경우 스토리지의 용량을 확장 할 경우가 있다. 이 경우 칵테일에서는 아래와 같이 조치하면 된다.

쿠버네티스에서는 몇몇 클라우드 프로바이더의 스토리지 클래스를 통해 PVC의 요청량을 늘리면 PV 및 해 당 스토리지의 용량이 자동 확장 된다. 
이 때 PV는 Capacity 량이 조정 되며, 연결된 스토리지는 프로비져 닝을 통해 스케일 업 된다.
단, 이렇게 조정된 요청량이 Pod에 반영되기 위해서는 마운트 한 Pod를 재 시작 해주어야 한다.

칵테일 클라우드는 서비스 맵의 스토리지 볼륨 화면에서 해당 볼륨의 요청량을 수정하면 쿠버네티스와 같은 방식으로 볼륨을 확장 할 수 있다. 
단, 해당 볼륨을 마운트 한 워크로드는 재 시작 해주어야 한다.

용량 확장이 가능하게 스토리지 클래스가 지원되는 프로바이터 스토리지 이외에는 스토리지 자체를 확장하고 위와 같은 작업을 수행해 주어야 한다. 
대표적인 예가 NFS 스토리지 이다.

칵테일 클라우드에서 NFS 플러그인 타입(NFS, NFS Named)의 스토리지는 스토리지 클래스를 통해 해당 스토리지가 확장될 수 없기 때문에, 
스토리지 확장 부터 해주어야 한다. 

NFS 스토리지의 확장은 다음 명령어를 통해 수행 한다.

```
# NFS 스토리지가 운영되는 호스트에 로그인 한 후 # 스토리지 디바이스 이름을 조회

$ lsblk
NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT sda 8:0020G0disk
└─sda1 8:1 0 20G 0 part /
sdb 8:16 0 100G 0 disk /storage

# sda 디바이스의 용량을 확장
$ xfs_growfs /dev/sdb -D 40G

```

위 명령어로 스토리지 디바이스의 용량을 확장한 후에는 칵테일 클라우드의 클러스터 메뉴의 스토리지 화면에서 아래와 같이 스토리지 정보 수정을 해주어야 한다
* NFS 플러그인 타입의 스토리지가 확장된 경우, 스토리지의 총 용량 값 수정
* NFS Named 타입인 경우, 용량 값 수정

다음 서비스 맵에서 볼륨의 요청량 정보를 수정 하면 워크로드를 확장된 스토리지 용량을 사용 할 수 있다. NFS인 경우는 워크로드를 재 시작 할 필요가 없다.
